(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{358:function(s,e,a){"use strict";a.r(e);var t=a(42),r=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"通信信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通信信息"}},[s._v("#")]),s._v(" 通信信息")]),s._v(" "),a("p",[s._v("工业常用通信协议")]),s._v(" "),a("h2",{attrs:{id:"modbus"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modbus"}},[s._v("#")]),s._v(" Modbus")]),s._v(" "),a("h2",{attrs:{id:"cors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cors"}},[s._v("#")]),s._v(" CORS")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",target:"_blank",rel:"noopener noreferrer"}},[s._v("1.MDN CORS"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("跨域资源共享(CORS) 是一种机制，它使用额外的 HTTP 头来告诉浏览器  让运行在一个 origin (domain) 上的Web应用被准许访问来自不同源服务器上的指定的资源。当一个资源从与该资源本身所在的服务器不同的域、协议或端口请求一个资源时，资源会发起一个跨域 HTTP 请求。")]),s._v(" "),a("p",[s._v("跨域资源共享标准新增了一组 HTTP 首部字段，允许服务器声明哪些源站通过浏览器有权限访问哪些资源。另外，规范要求，对那些可能对服务器数据产生副作用的 HTTP 请求方法（特别是 GET 以外的 HTTP 请求，或者搭配某些 MIME 类型的 POST 请求），浏览器必须首先使用 OPTIONS 方法发起一个预检请求（preflight request），从而获知服务端是否允许该跨域请求。服务器确认允许之后，才发起实际的 HTTP 请求。在预检请求的返回中，服务器端也可以通知客户端，是否需要携带身份凭证（包括 Cookies 和 HTTP 认证相关数据）。")]),s._v(" "),a("h3",{attrs:{id:"简单请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单请求"}},[s._v("#")]),s._v(" 简单请求")]),s._v(" "),a("ul",[a("li",[s._v("简单请求如下：\n"),a("ul",[a("li",[s._v("GET")]),s._v(" "),a("li",[s._v("HEAD")]),s._v(" "),a("li",[s._v("POST")])])]),s._v(" "),a("li",[s._v("除了被用户代理自动设置的首部字段（例如 Connection ，User-Agent）和在 Fetch 规范中定义为 禁用首部名称 的其他首部，允许人为设置的字段为 Fetch 规范定义的 对 CORS 安全的首部字段集合。该集合为：\n"),a("ul",[a("li",[s._v("Accept")]),s._v(" "),a("li",[s._v("Accept-Language")]),s._v(" "),a("li",[s._v("Content-Language")]),s._v(" "),a("li",[s._v("Content-Type （需要注意额外的限制）")]),s._v(" "),a("li",[s._v("DPR")]),s._v(" "),a("li",[s._v("Downlink")]),s._v(" "),a("li",[s._v("Save-Data")]),s._v(" "),a("li",[s._v("Viewport-Width")]),s._v(" "),a("li",[s._v("Width")])])]),s._v(" "),a("li",[s._v("Content-Type 的值仅限于下列三者之一：\n"),a("ul",[a("li",[s._v("text/plain")]),s._v(" "),a("li",[s._v("multipart/form-data")]),s._v(" "),a("li",[s._v("application/x-www-form-urlencoded")])])])]),s._v(" "),a("h3",{attrs:{id:"response-header"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-header"}},[s._v("#")]),s._v(" Response Header")]),s._v(" "),a("p",[s._v("响应请求头")]),s._v(" "),a("ul",[a("li",[s._v("Access-Control-Allow-Origin")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Access-Control-Allow-Origin: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("origin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" *\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("其中，origin 参数的值指定了允许访问该资源的外域 URI。对于不需要携带身份凭证的请求，服务器可以指定该字段的值为通配符，表示允许来自所有域的请求。")]),s._v(" "),a("ul",[a("li",[s._v("Access-Control-Expose-Headers")])]),s._v(" "),a("p",[s._v("Access-Control-Expose-Headers 头让服务器把允许浏览器访问的头放入白名单，例如：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这样浏览器就能够通过getResponseHeader访问X-My-Custom-Header和 X-Another-Custom-Header 响应头了。")]),s._v(" "),a("ul",[a("li",[s._v("Access-Control-Max-Age")])]),s._v(" "),a("p",[s._v("Access-Control-Max-Age 头指定了preflight请求的结果能够被缓存多久，请参考本文在前面提到的preflight例子。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Access-Control-Max-Age: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("delta-seconds"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("Access-Control-Allow-Credentials")])]),s._v(" "),a("p",[s._v("Access-Control-Allow-Credentials 头指定了当浏览器的credentials设置为true时是否允许浏览器读取response的内容。当用在对preflight预检测请求的响应中时，它指定了实际的请求是否可以使用credentials。请注意：简单 GET 请求不会被预检；如果对此类请求的响应中不包含该字段，这个响应将被忽略掉，并且浏览器也不会将相应内容返回给网页。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Access-Control-Allow-Credentials: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("Access-Control-Allow-Methods")])]),s._v(" "),a("p",[s._v("Access-Control-Allow-Methods 首部字段用于预检请求的响应。其指明了实际请求所允许使用的 HTTP 方法。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Access-Control-Allow-Methods: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("method"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("method"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("*\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("Access-Control-Allow-Headers")])]),s._v(" "),a("p",[s._v("Access-Control-Allow-Headers 首部字段用于预检请求的响应。其指明了实际请求中允许携带的首部字段。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Access-Control-Allow-Headers: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("field-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("field-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("*\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"http-request-field"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-request-field"}},[s._v("#")]),s._v(" Http Request Field")]),s._v(" "),a("p",[s._v("HTTP请求字段")]),s._v(" "),a("ul",[a("li",[s._v("Origin")])]),s._v(" "),a("p",[s._v("首部字段表明预检请求或实际请求的源站。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Origin: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("origin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("origin 参数的值为源站 URI。它不包含任何路径信息，只是服务器名称。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("Note: 有时候将该字段的值设置为空字符串是有用的，例如，当源站是一个 data URL 时。在所有访问控制请求（Access control request）中，Origin 首部字段总是被发送。")])]),s._v(" "),a("ul",[a("li",[s._v("Access-Control-Request-Method")])]),s._v(" "),a("p",[s._v("Access-Control-Request-Method 首部字段用于预检请求。其作用是，将实际请求所使用的 HTTP 方法告诉服务器。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Access-Control-Request-Method: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("method"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("Access-Control-Request-Headers")])]),s._v(" "),a("p",[s._v("Access-Control-Request-Headers 首部字段用于预检请求。其作用是，将实际请求所携带的首部字段告诉服务器。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);