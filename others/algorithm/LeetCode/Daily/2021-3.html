<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2021-3 | 菜鸟进阶</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/CS-LearnRepository/logo.png">
    <link rel="manifest" href="/CS-LearnRepository/manifest.json">
    <link rel="apple-touch-icon" href="/CS-LearnRepository/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/CS-LearnRepository/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Personal Website">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/CS-LearnRepository/assets/css/0.styles.1d31411f.css" as="style"><link rel="preload" href="/CS-LearnRepository/assets/js/app.ae6f3f76.js" as="script"><link rel="preload" href="/CS-LearnRepository/assets/js/2.1ba326f9.js" as="script"><link rel="preload" href="/CS-LearnRepository/assets/js/94.f913f980.js" as="script"><link rel="prefetch" href="/CS-LearnRepository/assets/js/10.2e5ceadb.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/100.52ab5ed3.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/101.cc544cfc.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/102.38bb05fe.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/103.ad8dc25f.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/104.257fe328.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/105.1ca53594.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/106.112495f8.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/107.76552c87.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/108.3decb1c1.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/109.8195a469.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/11.4c3344a7.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/110.5446659d.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/111.483e4bba.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/112.2be2fc97.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/113.103f9302.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/114.b4853da1.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/115.b61b7ffa.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/116.0f3e8335.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/117.b43ce674.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/118.142a9ecb.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/119.c844961a.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/12.1e24409a.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/120.4950ab7b.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/121.29194c11.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/122.df8b0089.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/123.bc750af2.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/124.57b4fb51.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/125.162c7922.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/126.7c557d46.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/127.0fd666a8.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/128.0ce81f0d.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/129.b9b42849.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/13.a8788553.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/130.4b63bc72.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/131.8e5b33c0.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/132.351ac869.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/133.f721dd50.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/134.ef73c22f.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/135.0168fa9d.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/136.f7963c44.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/137.0826f57a.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/138.83cb8db6.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/14.2adc07f3.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/15.c1cf2f8f.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/16.824fd1cc.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/17.5cc9aa75.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/18.18f5e735.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/19.14efb2a6.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/20.8d8917ea.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/21.93499688.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/22.f9eef547.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/23.21f4ca65.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/24.06bcd4f7.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/25.cc75fd3f.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/26.fe55d81f.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/27.04cc9d8d.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/28.d5593707.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/29.6ae24eac.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/3.d0ce688b.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/30.6e4c58e4.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/31.71a57386.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/32.86cd035f.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/33.47f825cd.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/34.7ce7068d.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/35.f1b91d69.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/36.22ffc057.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/37.4c7063b8.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/38.a2d7d6d1.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/39.72e170d1.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/4.bcd513ff.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/40.c896b7e4.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/41.c67d6883.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/42.d3f25ca5.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/43.c9d8fd17.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/44.48b09b06.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/45.62d8c8c0.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/46.d4081d7b.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/47.05c08073.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/48.6f7f50ff.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/49.e804fa12.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/5.8f5a74a9.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/50.61abf6a0.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/51.bd07e3d1.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/52.e688c802.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/53.8fdea818.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/54.e80145dd.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/55.d1499bc5.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/56.d33b6ee0.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/57.5a2fb031.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/58.5d1523b3.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/59.962b4b72.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/6.744b5cc8.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/60.37f53572.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/61.e3ce296e.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/62.fbb24cf8.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/63.2fdd5d90.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/64.c6771c06.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/65.0c4efae1.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/66.c99594bc.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/67.b241276f.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/68.9818dca2.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/69.5ebf774f.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/7.d576193f.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/70.696953d4.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/71.537d925f.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/72.529f57ce.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/73.26895b96.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/74.95bfb80a.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/75.417b0741.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/76.a2b74358.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/77.c431a1e5.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/78.cc7ddc5c.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/79.18636072.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/8.64e9f0f8.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/80.59a45e97.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/81.ea4c19bf.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/82.a4e09105.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/83.c84a5cc0.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/84.c56acd4a.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/85.9c0e5bad.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/86.9221650d.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/87.3474573c.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/88.841bf75e.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/89.de45407b.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/9.53d7237c.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/90.37ebf94c.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/91.f70bb95f.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/92.be6f1894.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/93.263999b7.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/95.6e6c8131.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/96.b258bbf5.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/97.f0dc77c2.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/98.d2aa840c.js"><link rel="prefetch" href="/CS-LearnRepository/assets/js/99.601caf05.js">
    <link rel="stylesheet" href="/CS-LearnRepository/assets/css/0.styles.1d31411f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/CS-LearnRepository/" class="home-link router-link-active"><!----> <span class="site-name">菜鸟进阶</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/CS-LearnRepository/frontend/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/CS-LearnRepository/backend/" class="nav-link">
  后端基础
</a></div><div class="nav-item"><a href="/CS-LearnRepository/app/" class="nav-link">
  移动应用
</a></div><div class="nav-item"><a href="/CS-LearnRepository/others/" class="nav-link router-link-active">
  诗和远方
</a></div><div class="nav-item"><a href="https://github.com/cugzhaolei/CS-LearnRepository" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/CS-LearnRepository/frontend/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/CS-LearnRepository/backend/" class="nav-link">
  后端基础
</a></div><div class="nav-item"><a href="/CS-LearnRepository/app/" class="nav-link">
  移动应用
</a></div><div class="nav-item"><a href="/CS-LearnRepository/others/" class="nav-link router-link-active">
  诗和远方
</a></div><div class="nav-item"><a href="https://github.com/cugzhaolei/CS-LearnRepository" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>2021-3</span> <!----></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="_2021-3"><a href="#_2021-3" class="header-anchor">#</a> 2021-3</h3> <h4 id="_227-基本计算器-ii"><a href="#_227-基本计算器-ii" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/basic-calculator-ii/" target="_blank" rel="noopener noreferrer">227. 基本计算器 II<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p><strong>难度</strong><code>中等</code></p> <p>给你一个字符串表达式 s ，请你实现一个基本计算器来计算并返回它的值。</p> <p>整数除法仅保留整数部分。</p> <blockquote><p>示例 1：</p> <p>输入：s = &quot;3+2*2&quot;
输出：7
示例 2：</p> <p>输入：s = &quot; 3/2 &quot;
输出：1
示例 3：</p> <p>输入：s = &quot; 3+5 / 2 &quot;
输出：5</p></blockquote> <p>提示：</p> <ul><li>1 &lt;= s.length &lt;= 3 * 105</li> <li>s 由整数和算符 ('+', '-', '*', '/') 组成，中间由一些空格隔开</li> <li>s 表示一个 有效表达式</li> <li>表达式中的所有整数都是非负整数，且在范围 [0, 231 - 1] 内</li> <li>题目数据保证答案是一个 32-bit 整数</li></ul> <h5 id="题解"><a href="#题解" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/basic-calculator-ii/solution/ji-ben-ji-suan-qi-ii-by-leetcode-solutio-cm28/" target="_blank" rel="noopener noreferrer">题解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h5> <p>方法一：栈
思路</p> <p>由于乘除优先于加减计算，因此不妨考虑先进行所有乘除运算，并将这些乘除运算后的整数值放回原表达式的相应位置，则随后整个表达式的值，就等于一系列整数加减后的值。</p> <p>基于此，我们可以用一个栈，保存这些（进行乘除运算后的）整数的值。对于加减号后的数字，将其直接压入栈中；对于乘除号后的数字，可以直接与栈顶元素计算，并替换栈顶元素为计算后的结果。</p> <p>具体来说，遍历字符串 <code>s</code>，并用变量<code>preSign</code> 记录每个数字之前的运算符，对于第一个数字，其之前的运算符视为加号。每次遍历到数字末尾时，根据 <code>preSign</code> 来决定计算方式：</p> <ul><li>加号：将数字压入栈；</li> <li>减号：将数字的相反数压入栈；</li> <li>乘除号：计算数字与栈顶元素，并将栈顶元素替换为计算结果。
代码实现中，若读到一个运算符，或者遍历到字符串末尾，即认为是遍历到了数字末尾。处理完该数字后，更新 <code>preSign</code> 为当前遍历的字符。</li></ul> <p>遍历完字符串 ss 后，将栈中元素累加，即为该字符串表达式的值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">calculate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    s <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> preSign <span class="token operator">=</span> <span class="token string">'+'</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> n <span class="token operator">=</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">' '</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 是数字或者是空格时</span>
            num <span class="token operator">=</span> num <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 全局num 1 12 123</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> i <span class="token operator">===</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//特殊符号 或者是最后一个</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span>preSign<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token string">'+'</span><span class="token operator">:</span>
                    stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">'-'</span><span class="token operator">:</span>
                    stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">-</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">'*'</span><span class="token operator">:</span>
                    stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">default</span><span class="token operator">:</span>
                    stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> num <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>   
            preSign <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ans <span class="token operator">+=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h5 id="复杂度分析"><a href="#复杂度分析" class="header-anchor">#</a> 复杂度分析</h5> <p>时间复杂度：<code>O(n)</code>，其中 <code>n</code> 为字符串 <code>s</code>的长度。需要遍历字符串 <code>s</code> 一次，计算表达式的值。</p> <p>空间复杂度：<code>O(n)</code>，其中 <code>n</code>为字符串 <code>s</code> 的长度。空间复杂度主要取决于栈的空间，栈的元素个数不超过 <code>n</code>。</p> <h5 id="参考链接"><a href="#参考链接" class="header-anchor">#</a> 参考链接</h5> <p>https://leetcode-cn.com/problems/basic-calculator-ii/</p> <p>https://leetcode-cn.com/problems/basic-calculator-ii/solution/shi-yong-shuang-zhan-jie-jue-jiu-ji-biao-c65k/</p> <h4 id="_331-验证二叉树的前序序列化"><a href="#_331-验证二叉树的前序序列化" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/verify-preorder-serialization-of-a-binary-tree/" target="_blank" rel="noopener noreferrer">331. 验证二叉树的前序序列化<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p><strong>难度</strong> <code>中等</code> <code>栈</code></p> <p>序列化二叉树的一种方法是使用前序遍历。当我们遇到一个非空节点时，我们可以记录下这个节点的值。如果它是一个空节点，我们可以使用一个标记值记录，例如 #。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>       _9_
      /   <span class="token punctuation">\</span>
     <span class="token number">3</span>     <span class="token number">2</span>
   / <span class="token punctuation">\</span>    / <span class="token punctuation">\</span>
  <span class="token number">4</span>   <span class="token number">1</span>  <span class="token comment">#  6</span>
 / <span class="token punctuation">\</span>  / <span class="token punctuation">\</span>   / <span class="token punctuation">\</span>
<span class="token comment"># # # #  #  #</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>例如，上面的二叉树可以被序列化为字符串<code>&quot;9,3,4,#,#,1,#,#,2,#,6,#,#&quot;</code>，其中 # 代表一个空节点。</p> <p>给定一串以逗号分隔的序列，验证它是否是正确的二叉树的前序序列化。编写一个在不重构树的条件下的可行算法。</p> <p>每个以逗号分隔的字符或为一个整数或为一个表示 <code>null</code> 指针的 <code>'#'</code> 。</p> <p>你可以认为输入格式总是有效的，例如它永远不会包含两个连续的逗号，比如<code>&quot;1,,3&quot;</code> 。</p> <blockquote><p>示例 1:</p> <p>输入: &quot;9,3,4,#,#,1,#,#,2,#,6,#,#&quot;
输出: true`
示例 2:</p> <p>输入: &quot;1,#&quot;
输出: false
示例 3:</p> <p>输入: &quot;9,#,#,1&quot;
输出: false</p></blockquote> <h5 id="题解一"><a href="#题解一" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/verify-preorder-serialization-of-a-binary-tree/solution/yan-zheng-er-cha-shu-de-qian-xu-xu-lie-h-jghn/" target="_blank" rel="noopener noreferrer">题解一<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h5> <p>我们可以定义一个概念，叫做槽位。一个槽位可以被看作「当前二叉树中正在等待被节点填充」的那些位置。</p> <p>二叉树的建立也伴随着槽位数量的变化。每当遇到一个节点时：</p> <ul><li><p>如果遇到了空节点，则要消耗一个槽位；</p></li> <li><p>如果遇到了非空节点，则除了消耗一个槽位外，还要再补充两个槽位。</p></li></ul> <p>此外，还需要将根节点作为特殊情况处理。</p> <p><img src="https://i.loli.net/2021/03/13/PivywLpIotOg6MH.png" alt="fig1"></p> <p>我们使用栈来维护槽位的变化。栈中的每个元素，代表了对应节点处剩余槽位的数量，而栈顶元素就对应着下一步可用的槽位数量。当遇到空节点时，仅将栈顶元素减 1；当遇到非空节点时，<strong>将栈顶元素减</strong> 1 后，再向栈中压入一个 2。无论何时，如果栈顶元素变为 0，就立刻将栈顶弹出。</p> <p>遍历结束后，若栈为空，说明没有待填充的槽位，因此是一个合法序列；否则若栈不为空，则序列不合法。此外，在遍历的过程中，若槽位数量不足，则序列不合法。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @param {string} preorder
 * @return {boolean}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">isValidSerialization</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">preorder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> n <span class="token operator">=</span> preorder<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>preorder<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">','</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token operator">++</span>i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>preorder<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'#'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> 
            <span class="token operator">++</span>i<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 读一个数字</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> preorder<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">','</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token operator">++</span>i<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> stack<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 将栈顶的操作每次都在取数的时候操作</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h5 id="复杂度分析-2"><a href="#复杂度分析-2" class="header-anchor">#</a> 复杂度分析</h5> <p>时间复杂度：<code>O(n)</code>，其中 <code>n</code> 为字符串的长度。我们每个字符只遍历一次，同时每个字符对应的操作都是常数时间的。</p> <p>空间复杂度：<code>O(n)</code>。此为栈所需要使用的空间</p> <h5 id="解法二"><a href="#解法二" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/verify-preorder-serialization-of-a-binary-tree/solution/pai-an-jiao-jue-de-liang-chong-jie-fa-zh-66nt/" target="_blank" rel="noopener noreferrer">解法二<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h5> <p>X # #的数据合成</p> <p>如输入：<code>&quot;9,3,4,#,#,1,#,#,2,#,6,#,#&quot;</code>，当遇到 <code>x,#,#</code> 的时候，就把它变为<code>#</code>。</p> <p>模拟一遍过程：</p> <blockquote><p>[9,3,4,#,#] =&gt; [9,3,#]，继续
[9,3,#,1,#,#] =&gt; [9,3,#,#] =&gt; [9,#] ，继续
[9,#2,#,6,#,#] =&gt; [9,#,2,#,#] =&gt; [9,#,#] =&gt; [#]，结束</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @param {string} preorder
 * @return {boolean}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">isValidSerialization</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">preorder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> stack<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> s <span class="token keyword">of</span> preorder<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        stack<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length<span class="token operator">&gt;=</span><span class="token number">3</span><span class="token operator">&amp;&amp;</span>stack<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'#'</span><span class="token operator">&amp;&amp;</span>stack<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'#'</span><span class="token operator">&amp;&amp;</span>stack<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            stack<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            stack<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            stack<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            stack<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> stack<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token operator">&amp;&amp;</span>stack<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'#'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><ul><li>时间复杂度：<code>O(N)</code></li> <li>空间复杂度：<code>O(N)</code></li></ul> <h6 id="计算入度出度"><a href="#计算入度出度" class="header-anchor">#</a> 计算入度出度</h6> <p>背景知识：</p> <ul><li>入度：有多少个节点指向它；</li> <li>出度：它指向多少个节点。
我们知道在树（甚至图）中，所有节点的入度之和等于出度之和。可以根据这个特点判断输入序列是否为有效的！</li></ul> <p>在一棵二叉树中：</p> <ul><li>每个空节点（ &quot;#&quot; ）会提供 0 个出度和 1 个入度。</li> <li>..每个非空节点会提供 2 个出度和 1 个入度（根节点的入度是 0）。</li></ul> <p>我们只要把字符串遍历一次，每个节点都累加 <code>diff = 出度 - 入度</code> 。在遍历到任何一个节点的时候，要求<code>diff &gt;= 0</code>，原因是还没遍历到该节点的子节点，所以此时的出度应该大于等于入度。当所有节点遍历完成之后，整棵树的<code>diff == 0</code> 。</p> <p>这里解释一下为什么下面的代码中 diff 的初始化为 1。因为，我们加入一个非空节点时，都会对 diff 先减去 1（入度），再加上 2（出度）。但是由于根节点没有父节点，所以其入度为 0，出度为 2。因此 diff 初始化为 1，是为了在加入根节点的时候，diff 先减去 1（入度），再加上 2（出度），此时 diff 正好应该是2.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">isValidSerialization</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">preorder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> nodes <span class="token operator">=</span> preorder<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> diff <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> node <span class="token keyword">of</span> nodes<span class="token punctuation">)</span><span class="token punctuation">{</span>
        diff <span class="token operator">-=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>diff<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token operator">!=</span><span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            diff <span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> diff <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>时间复杂度：<code>O(N)</code></li> <li>空间复杂度：<code>O(1)</code></li></ul> <h5 id="参考链接-2"><a href="#参考链接-2" class="header-anchor">#</a> 参考链接</h5> <ol><li>https://leetcode-cn.com/problems/verify-preorder-serialization-of-a-binary-tree/solution/yan-zheng-er-cha-shu-de-qian-xu-xu-lie-h-jghn/</li></ol> <h4 id="_705-设计哈希集合"><a href="#_705-设计哈希集合" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/design-hashset/" target="_blank" rel="noopener noreferrer">705. 设计哈希集合<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>不使用任何内建的哈希表库设计一个哈希集合（HashSet）。</p> <p>实现 MyHashSet 类：</p> <ul><li>void add(key) 向哈希集合中插入值 key 。</li> <li>bool contains(key) 返回哈希集合中是否存在这个值 key 。</li> <li>void remove(key) 将给定值 key 从哈希集合中删除。如果哈希集合中没有这个值，什么也不做。</li></ul> <p>示例：</p> <blockquote><p>输入：
[&quot;MyHashSet&quot;, &quot;add&quot;, &quot;add&quot;, &quot;contains&quot;, &quot;contains&quot;, &quot;add&quot;, &quot;contains&quot;, &quot;remove&quot;, &quot;contains&quot;]
[[], [1], [2], [1], [3], [2], [2], [2], [2]]
输出：
[null, null, null, true, false, null, true, null, false]</p> <p>解释：
MyHashSet myHashSet = new MyHashSet();
myHashSet.add(1);      // set = [1]
myHashSet.add(2);      // set = [1, 2]
myHashSet.contains(1); // 返回 True
myHashSet.contains(3); // 返回 False ，（未找到）
myHashSet.add(2);      // set = [1, 2]
myHashSet.contains(2); // 返回 True
myHashSet.remove(2);   // set = [1]
myHashSet.contains(2); // 返回 False ，（已移除）</p></blockquote> <h5 id="题解-2"><a href="#题解-2" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/design-hashset/solution/she-ji-ha-xi-ji-he-by-leetcode-solution-xp4t/" target="_blank" rel="noopener noreferrer">题解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h5> <ul><li><p>哈希函数：能够将集合中任意可能的元素映射到一个固定范围的整数值，并将该元素存储到整数值对应的地址上</p></li> <li><p>冲突处理：由于不同元素可能映射到相同的整数值，因此需要在整数值出现「冲突」时，需要进行冲突处理。总的来说，有以下几种策略解决冲突：</p> <ul><li>链地址法：为每个哈希值维护一个链表，并将具有相同哈希值的元素都放入这一链表当中。</li> <li>开放地址法：当发现哈希值 h 处产生冲突时，根据某种策略，从 h 出发找到下一个不冲突的位置。例如，一种最简单的策略是，不断地检查h+1,h+2,h+3,… 这些整数对应的位置。</li> <li>再哈希法：当发现哈希冲突后，使用另一个哈希函数产生一个新的地址。</li></ul></li> <li><p>扩容：当哈希表元素过多时，冲突的概率将越来越大，而在哈希表中查询一个元素的效率也会越来越低。因此，需要开辟一块更大的空间，来缓解哈希表中发生的冲突。</p></li></ul> <h6 id="链地址法"><a href="#链地址法" class="header-anchor">#</a> 链地址法</h6> <p>设哈希表的大小为 base，则可以设计一个简单的哈希函数：hash(x) = x mod hash(x)=x mod base。</p> <p>我们开辟一个大小为 base 的数组，数组的每个位置是一个链表。当计算出哈希值之后，就插入到对应位置的链表当中。</p> <p>由于我们使用整数除法作为哈希函数，为了尽可能避免冲突，应当将base 取为一个质数。在这里，我们取 base=769。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Initialize your data structure here.
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">MyHashSet</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">BASE</span> <span class="token operator">=</span> <span class="token number">769</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">BASE</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** 
 * @param {number} key
 * @return {void}
 */</span>
<span class="token class-name">MyHashSet</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// for(const item of  this.data[h]){</span>
    <span class="token comment">//     if(item === key){</span>
    <span class="token comment">//         return;</span>
    <span class="token comment">//     }</span>
    <span class="token comment">// }</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** 
 * @param {number} key
 * @return {void}
 */</span>
<span class="token class-name">MyHashSet</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> it <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>it<span class="token punctuation">.</span>length<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>it<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">===</span>key<span class="token punctuation">)</span><span class="token punctuation">{</span>
            it<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        	<span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Returns true if this set contains the specified element 
 * @param {number} key
 * @return {boolean}
 */</span>
<span class="token class-name">MyHashSet</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">contains</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// for(const item of this.data[h]){</span>
    <span class="token comment">//     if(item === key){</span>
    <span class="token comment">//         return  true;</span>
    <span class="token comment">//     }</span>
    <span class="token comment">// }</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>h<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">MyHashSet</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">hash</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> key<span class="token operator">%</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">BASE</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * Your MyHashSet object will be instantiated and called as such:
 * var obj = new MyHashSet()
 * obj.add(key)
 * obj.remove(key)
 * var param_3 = obj.contains(key)
 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><h5 id="复杂度分析-3"><a href="#复杂度分析-3" class="header-anchor">#</a> 复杂度分析</h5> <ul><li><p>时间复杂度：<code>O(n/b)</code>。其中 <code>n</code> 为哈希表中的元素数量，<code>b</code>为链表的数量。假设哈希值是均匀分布的，则每个链表大概长度为<code>n/b</code></p></li> <li><p>空间复杂度：<code>O(n+b)</code>。</p></li></ul> <h5 id="参考链接-3"><a href="#参考链接-3" class="header-anchor">#</a> 参考链接</h5> <p>1.https://leetcode-cn.com/problems/design-hashset/solution/she-ji-ha-xi-ji-he-by-leetcode-solution-xp4t/</p> <h4 id="_1603-设计停车系统"><a href="#_1603-设计停车系统" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/design-parking-system/" target="_blank" rel="noopener noreferrer">1603. 设计停车系统<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>请你给一个停车场设计一个停车系统。停车场总共有三种不同大小的车位：大，中和小，每种尺寸分别有固定数目的车位。</p> <p>请你实现 <code>ParkingSystem</code> 类：</p> <p><code>ParkingSystem(int big, int medium, int small)</code> 初始化 <code>ParkingSystem</code> 类，三个参数分别对应每种停车位的数目。
<code>bool addCar(int carType)</code> 检查是否有 <code>carType</code> 对应的停车位。 <code>carType</code> 有三种类型：大，中，小，分别用数字 <code>1</code>， <code>2</code> 和 <code>3</code> 表示。一辆车只能停在  <code>carType</code> 对应尺寸的停车位中。如果没有空车位，请返回 <code>false</code> ，否则将该车停入车位并返回<code>true</code> 。</p> <p><strong>示例 1：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>输入：
[&quot;ParkingSystem&quot;, &quot;addCar&quot;, &quot;addCar&quot;, &quot;addCar&quot;, &quot;addCar&quot;]
[[1, 1, 0], [1], [2], [3], [1]]
输出：
[null, true, true, false, false]

解释：
ParkingSystem parkingSystem = new ParkingSystem(1, 1, 0);
parkingSystem.addCar(1); // 返回 true ，因为有 1 个空的大车位
parkingSystem.addCar(2); // 返回 true ，因为有 1 个空的中车位
parkingSystem.addCar(3); // 返回 false ，因为没有空的小车位
parkingSystem.addCar(1); // 返回 false ，因为没有空的大车位，唯一一个大车位已经被占据了
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>提示：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>0 &lt;= big, medium, small &lt;= 1000
carType 取值为 1， 2 或 3
最多会调用 addCar 函数 1000 次
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="题解-3"><a href="#题解-3" class="header-anchor">#</a> 题解</h5> <p>按照题目要求构建一个map,在读取的过程中，判断三个map的值，是否小于0，如果小于0则返回false</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @param {number} big
 * @param {number} medium
 * @param {number} small
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">ParkingSystem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">big<span class="token punctuation">,</span> medium<span class="token punctuation">,</span> small</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>garage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>garage<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span>big<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>garage<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span>medium<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>garage<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span>small<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** 
 * @param {number} carType
 * @return {boolean}
 */</span>
<span class="token class-name">ParkingSystem</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">addCar</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">carType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token operator">+</span>carType<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'1'</span><span class="token operator">:</span>
            <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>garage<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>num<span class="token operator">&gt;=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                num<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>garage<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'2'</span><span class="token operator">:</span>
            <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>garage<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>num<span class="token operator">&gt;=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                num<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>garage<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'3'</span><span class="token operator">:</span>
            <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>garage<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>num<span class="token operator">&gt;=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                num<span class="token operator">--</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>garage<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Your ParkingSystem object will be instantiated and called as such:
 * var obj = new ParkingSystem(big, medium, small)
 * var param_1 = obj.addCar(carType)
 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h5 id="复杂度分析-4"><a href="#复杂度分析-4" class="header-anchor">#</a> 复杂度分析</h5> <p>时间和空间复杂度O(1)</p> <h5 id="参考链接-4"><a href="#参考链接-4" class="header-anchor">#</a> 参考链接</h5> <ol><li>https://leetcode-cn.com/problems/design-parking-system</li></ol> <h4 id="_191-位1的个数"><a href="#_191-位1的个数" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/number-of-1-bits/" target="_blank" rel="noopener noreferrer">191. 位1的个数<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>编写一个函数，输入是一个无符号整数（以二进制串的形式），返回其二进制表达式中数字位数为 '1' 的个数（也被称为汉明重量）。</p> <p><strong>提示：</strong></p> <p>请注意，在某些语言（如 Java）中，没有无符号整数类型。在这种情况下，输入和输出都将被指定为有符号整数类型，并且不应影响您的实现，因为无论整数是有符号的还是无符号的，其内部的二进制表示形式都是相同的。</p> <p>在 Java 中，编译器使用二进制补码记法来表示有符号整数。因此，在上面的 示例 3 中，输入表示有符号整数 -3。</p> <blockquote><p>示例 1：</p> <p>输入：00000000000000000000000000001011
输出：3
解释：输入的二进制串 00000000000000000000000000001011 中，共有三位为 '1'。
示例 2：</p> <p>输入：00000000000000000000000010000000
输出：1
解释：输入的二进制串 00000000000000000000000010000000 中，共有一位为 '1'。
示例 3：</p> <p>输入：11111111111111111111111111111101
输出：31
解释：输入的二进制串 11111111111111111111111111111101 中，共有 31 位为 '1'。</p></blockquote> <p><strong>提示：</strong></p> <p>输入必须是长度为 32 的 二进制串 。</p> <p><strong>进阶：</strong></p> <p>如果多次调用这个函数，你将如何优化你的算法？</p> <h5 id="题解-4"><a href="#题解-4" class="header-anchor">#</a> 题解</h5> <p>补码：</p> <ul><li><p>正数：正整数的补码是其二进制表示，与<a href="https://baike.baidu.com/item/%E5%8E%9F%E7%A0%81" target="_blank" rel="noopener noreferrer">原码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>相同</p> <p>+9的补码是00001001。（备注：这个+9的补码是用8位2<a href="https://baike.baidu.com/item/%E8%BF%9B%E5%88%B6" target="_blank" rel="noopener noreferrer">进制<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>来表示的，补码表示方式很多，还有16位二进制补码表示形式，以及32位二进制补码表示形式，64位进制补码表示形式等。每一种补码表示形式都只能表示有限的数字。）</p></li> <li><p>负数：求负整数的补码，将其原码除符号位外的所有位取反（0变1，1变0，符号位为1不变）后加1</p> <p>-5对应带符号位负数5（10000101）→除符号位外所有位取反（11111010）→加00000001(11111011)</p> <p>所以-5的补码是11111011。</p></li> <li><p>0：数0的补码表示是<strong>唯一</strong>的 。</p> <p>[+0]补=[+0]反=[+0]原=00000000</p> <p>[ -0]补=11111111+1=00000000</p></li></ul> <h5 id="解法一-循环检查二进制位"><a href="#解法一-循环检查二进制位" class="header-anchor">#</a> 解法一：循环检查二进制位</h5> <p>我们可以直接循环检查给定整数 <code>n</code> 的二进制位的每一位是否为<code>1</code>。</p> <p>具体代码中，当检查第 <code>i</code>位时，我们可以让<code>n</code> 与 <code>2^i</code>进行与运算，当且仅当 <code>n</code> 的第 <code>i</code> 位为 <code>1</code> 时，运算结果不为 <code>0</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">hamingWeight</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">32</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            res<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    retrun res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h5 id="解法二-位运算优化"><a href="#解法二-位运算优化" class="header-anchor">#</a> 解法二：位运算优化</h5> <p>观察这个运算：<code>n&amp;(n - 1)</code>，其运算结果恰为把<code>n</code>的二进制位中的最低位的 <code>1</code> 变为<code>0</code> 之后的结果。</p> <p>如：<code>6&amp;(6-1) = 4, 6 = (110)_2, 4 = (100)_2</code>，运算结果<code>4</code> 即为把 <code>6</code>的二进制位中的最低位的<code>1</code>变为 <code>0</code> 之后的结果。</p> <p>这样我们可以利用这个位运算的性质加速我们的检查过程，在实际代码中，我们不断让当前的 <code>n</code> 与 <code>n - 1</code>做与运算，直到 <code>n</code> 变为 <code>0</code>即可。因为每次运算会使得 <code>n</code> 的最低位的<code>1</code> 被翻转，因此运算次数就等于 <code>n</code>的二进制位中 <code>1</code>的个数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">hamingWeight</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">{</span>
        n<span class="token operator">&amp;=</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        res<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="解法三-bitcount源码"><a href="#解法三-bitcount源码" class="header-anchor">#</a> 解法三 bitCount源码</h5> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hamingWeight</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>
        n <span class="token operator">=</span> n<span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token operator">&gt;&gt;&gt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token number">0x55555555</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        n <span class="token operator">=</span> <span class="token punctuation">(</span>n<span class="token operator">&amp;</span><span class="token number">0x33333333</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token operator">&gt;&gt;&gt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token number">0x3333333</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        n <span class="token operator">=</span> n<span class="token operator">+</span><span class="token punctuation">(</span>n<span class="token operator">&gt;&gt;&gt;</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token number">0x0f0f0f0f</span><span class="token punctuation">;</span>
        n <span class="token operator">=</span> n<span class="token operator">+</span><span class="token punctuation">(</span>n<span class="token operator">&gt;&gt;&gt;</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        n <span class="token operator">=</span> n<span class="token operator">+</span><span class="token punctuation">(</span>n<span class="token operator">&gt;&gt;&gt;</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> n<span class="token operator">&amp;</span><span class="token number">0x3f</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="参考链接-5"><a href="#参考链接-5" class="header-anchor">#</a> 参考链接</h5> <p><a href="https://baike.baidu.com/item/%E8%A1%A5%E7%A0%81/6854613?fromtitle=%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%A1%A5%E7%A0%81&amp;fromid=5295284" target="_blank" rel="noopener noreferrer">1.补码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://leetcode-cn.com/problems/number-of-1-bits/solution/wei-1de-ge-shu-by-leetcode-solution-jnwf/" target="_blank" rel="noopener noreferrer">2.位1的个数Leetcode<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://blog.csdn.net/weixin_30587927/article/details/101093369" target="_blank" rel="noopener noreferrer">3.《数据结构（C++）》<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://blog.csdn.net/qq_27007509/article/details/112246576" target="_blank" rel="noopener noreferrer">4.Integer.bitCount函数理解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="_456-132-模式"><a href="#_456-132-模式" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/132-pattern/" target="_blank" rel="noopener noreferrer">456. 132 模式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p><strong>难度</strong>：<code>中等</code></p> <p>给你一个整数数组<code>nums</code> ，数组中共有 <code>n</code>个整数。<strong><code>132</code>模式的子序列</strong>由三个整数<code>nums[i]</code>、<code>nums[j]</code>和 <code>nums[k]</code>组成，并同时满足：<code>i &lt; j &lt; k</code>和<code>nums[i] &lt; nums[k] &lt; nums[j]</code>。</p> <p>如果<code>nums</code> 中存在**<code>132</code>模式的子序列 **，返回<code>true</code>；否则，返回<code>false</code>。</p> <p><strong>进阶</strong>：很容易想到时间复杂度为 <code>O(n^2)</code> 的解决方案，你可以设计一个时间复杂度为 <code>O(n logn)</code>或<code>O(n)</code>的解决方案吗？</p> <blockquote><p>示例 1：</p> <p>输入：nums = [1,2,3,4]
输出：false
解释：序列中不存在 132 模式的子序列。
示例 2：</p> <p>输入：nums = [3,1,4,2]
输出：true
解释：序列中有 1 个 132 模式的子序列： [1, 4, 2] 。
示例 3：</p> <p>输入：nums = [-1,3,2,0]
输出：true
解释：序列中有 3 个 132 模式的的子序列：[-1, 3, 2]、[-1, 3, 0] 和 [-1, 2, 0] 。</p></blockquote> <p><strong>提示：</strong></p> <blockquote><p>n == nums.length
1 &lt;= n &lt;= 10^4
-10^9 &lt;= nums[i] &lt;= 10^9</p></blockquote> <h5 id="题解-5"><a href="#题解-5" class="header-anchor">#</a> 题解</h5> <p>由于本题中 <code>n</code> 的最大值可以到 <code>10^4</code>，因此对于一个满足 132 模式的三元组下标 <code>(i,j,k)</code>，枚举其中的 <code>2</code> 个下标时间复杂度为 <code>O(n^2)</code>，很容易超出时间限制。</p> <p>因此我们可以考虑枚举其中的 1 个下标，并使用合适的数据结构维护另外的 <code>2</code>个下标的可能值。</p> <h6 id="题解1-枚举3"><a href="#题解1-枚举3" class="header-anchor">#</a> 题解1：枚举3</h6> <p>枚举 <code>3</code> 是容易想到并且也是最容易实现的。由于<code>3</code>是模式中的最大值，并且其出现在 <code>1</code> 和<code>2</code>的中间，因此我们只需要从左到右枚举 <code>3</code>的下标<code>j</code>，那么：</p> <p>由于<code>1</code>是模式中的最小值，因此我们在枚举<code>j</code> 的同时，维护数组<code>a</code> 中左侧元素 <code>a[0..j-1]</code>的最小值，即为 <code>1</code>对应的元素 <code>a[i]</code>。需要注意的是，只有<code>a[i] &lt; a[j]</code>时，<code>a[i]</code>才能作为 <code>1</code>对应的元素；</p> <p>由于<code>2</code> 是模式中的次小值，因此我们可以使用一个有序集合（例如平衡树）维护数组 <code>a</code>中右侧元素 <code>a[j+1..n-1]</code>中的所有值。当我们确定了 <code>a[i]</code>和 <code>a[j]</code>之后，只需要在有序集合中查询严格比<code>a[i]</code>大的那个最小的元素，即为 <code>a[k]</code>。需要注意的是，只有<code>a[k] &lt; a[j]</code>时，<code>a[k]</code>才能作为 <code>3</code> 对应的元素。</p> <p>代码</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">find132pattern</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 左侧最小值</span>
        <span class="token keyword">int</span> leftMin <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// 右侧所有元素</span>
        <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> rightAll <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rightAll<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> rightAll<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>leftMin <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Integer</span> next <span class="token operator">=</span> rightAll<span class="token punctuation">.</span><span class="token function">ceilingKey</span><span class="token punctuation">(</span>leftMin <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> next <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            leftMin <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>leftMin<span class="token punctuation">,</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            rightAll<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rightAll<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>rightAll<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                rightAll<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h5 id="复杂度分析-5"><a href="#复杂度分析-5" class="header-anchor">#</a> 复杂度分析</h5> <p>时间复杂度：<code>O(nlogn)</code>。在初始化时，我们需要 <code>O(nlogn)</code> 的时间将数组元素 <code>a[2..n−1]</code>加入有序集合中。在枚举<code>j</code>时，维护左侧元素最小值的时间复杂度为<code>O(1)</code>，将<code>a[j+1]</code>从有序集合中删除的时间复杂度为<code>O(logn)</code>，总共需要枚举的次数为 <code>O(n)</code>，因此总时间复杂度为<code>O(nlogn)</code>。</p> <p>空间复杂度：<code>O(n)</code>，即为有序集合存储右侧所有元素需要使用的空间。</p> <h5 id="参考链接-6"><a href="#参考链接-6" class="header-anchor">#</a> 参考链接</h5> <ol><li>https://leetcode-cn.com/problems/132-pattern/</li> <li>https://leetcode-cn.com/problems/132-pattern/solution/132mo-shi-by-leetcode-solution-ye89/</li> <li>https://leetcode-cn.com/problems/132-pattern/solution/fu-xue-ming-zhu-cong-bao-li-qiu-jie-dao-eg78f/</li></ol> <h4 id="_61-旋转链表"><a href="#_61-旋转链表" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/rotate-list/" target="_blank" rel="noopener noreferrer">61. 旋转链表<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>给你一个链表的头节点 head ，旋转链表，将链表每个节点向右移动 k 个位置。</p> <blockquote><p>示例 1：</p> <p>输入：<code>head = [1,2,3,4,5], k = 2</code>
输出：<code>[4,5,1,2,3]</code></p> <p>示例 2：</p> <p>输入：<code>head = [0,1,2], k = 4</code>
输出：<code>[2,0,1]</code></p></blockquote> <p><strong>提示：</strong></p> <ul><li>链表中节点的数目在范围<code>[0, 500]</code>内</li> <li><code>-100 &lt;= Node.val &lt;= 100</code></li> <li><code>0 &lt;= k &lt;= 2 * 109</code></li></ul> <h5 id="题解-6"><a href="#题解-6" class="header-anchor">#</a> 题解</h5> <h5 id="方法一-闭合为环"><a href="#方法一-闭合为环" class="header-anchor">#</a> 方法一：闭合为环</h5> <p>思路及算法</p> <p>记给定链表的长度为<code>n</code>，注意到当向右移动的次数 <code>k≥n</code>时，我们仅需要向右移动 <code>k mod n</code>次即可。因为每<code>n</code>次移动都会让链表变为原状。这样我们可以知道，新链表的最后一个节点为原链表的第 <code>(n - 1) - (k mod n)</code>个节点（从 <code>0</code> 开始计数）。</p> <p>这样，我们可以先将给定的链表连接成环，然后将指定位置断开。</p> <p>具体代码中，我们首先计算出链表的长度 <code>n</code>，并找到该链表的末尾节点，将其与头节点相连。这样就得到了闭合为环的链表。然后我们找到新链表的最后一个节点（即原链表的第 <code>(n - 1) - (k mod n)</code>个节点），将当前闭合为环的链表断开，即可得到我们所需要的结果。</p> <p>特别地，当链表长度不大于 <code>1</code>，或者 <code>k</code> 为 <code>n</code>的倍数时，新链表将与原链表相同，我们无需进行任何处理。</p> <p>**代码 **</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">rotateRight</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">head<span class="token punctuation">,</span>k</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">===</span><span class="token number">0</span><span class="token operator">||</span><span class="token operator">!</span>head<span class="token operator">||</span><span class="token operator">!</span>head<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> head<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> cur <span class="token operator">=</span> head<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 计算链表的长度 calculate the length og nodeList</span>
        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        n<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">let</span> add <span class="token operator">=</span> n<span class="token operator">-</span>k<span class="token operator">%</span>n<span class="token punctuation">;</span> <span class="token comment">// 计算移动的距离 calculate the distance </span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>add <span class="token operator">===</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> head<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    cur<span class="token punctuation">.</span>next <span class="token operator">=</span> head<span class="token punctuation">;</span> <span class="token comment">// 头尾相连暂存链表 make the temp nodelist</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 移动到计算的距离下 move the k</span>
        cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        add<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">const</span> result <span class="token operator">=</span> cur<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    cur<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><strong>复杂度分析</strong></p> <ul><li>时间复杂度：<code>O(n)</code>，最坏情况下，我们需要遍历该链表两次。</li> <li>空间复杂度：<code>O(1)</code>，我们只需要常数的空间存储若干变量。</li></ul> <h5 id="参考链接-7"><a href="#参考链接-7" class="header-anchor">#</a> 参考链接</h5> <ol><li><p>https://leetcode-cn.com/problems/rotate-list</p></li> <li><p>https://leetcode-cn.com/problems/rotate-list/solution/xuan-zhuan-lian-biao-by-leetcode-solutio-woq1/</p></li> <li><p>https://leetcode-cn.com/problems/rotate-list/solution/fu-xue-ming-zhu-wen-ti-chai-fen-fen-xian-z4dr/</p></li></ol> <h4 id="_173-二叉搜索树迭代器"><a href="#_173-二叉搜索树迭代器" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/binary-search-tree-iterator/" target="_blank" rel="noopener noreferrer">173. 二叉搜索树迭代器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p>难度：<code>中等</code></p> <p>实现一个二叉搜索树迭代器类<code>BSTIterator</code> ，表示一个按中序遍历二叉搜索树<code>（BST）</code>的迭代器：</p> <ul><li><code>BSTIterator(TreeNode root)</code>初始化<code>BSTIterator</code> 类的一个对象。<code>BST</code>的根节点<code>root</code>会作为构造函数的一部分给出。指针应初始化为一个不存在于 <code>BST</code>中的数字，且该数字小于 <code>BST</code> 中的任何元素。</li> <li><code>boolean hasNext()</code> 如果向指针右侧遍历存在数字，则返回<code>true</code> ；否则返回<code>false</code>。</li> <li><code>int next()</code>将指针向右移动，然后返回指针处的数字。</li></ul> <blockquote><p>注意，指针初始化为一个不存在于<code>BST</code> 中的数字，所以对 <code>next()</code>的首次调用将返回<code>BST</code>中的最小元素。</p></blockquote> <p>你可以假设 <code>next()</code>调用总是有效的，也就是说，当调用<code>next()</code>时，<code>BST</code>的中序遍历中至少存在一个下一个数字。</p> <p><strong>示例：</strong></p> <blockquote><p><strong>输入</strong></p> <p>&quot;BSTIterator&quot;, &quot;next&quot;, &quot;next&quot;, &quot;hasNext&quot;, &quot;next&quot;, &quot;hasNext&quot;, &quot;next&quot;, &quot;hasNext&quot;, &quot;next&quot;, &quot;hasNext&quot;]
[[[7, 3, 15, null, null, 9, 20]], [], [], [], [], [], [], [], [], []]
输出
[null, 3, 7, true, 9, true, 15, true, 20, false]</p> <p><strong>解释</strong>
BSTIterator bSTIterator = new BSTIterator([7, 3, 15, null, null, 9, 20]);
bSTIterator.next();    // 返回 3
bSTIterator.next();    // 返回 7
bSTIterator.hasNext(); // 返回 True
bSTIterator.next();    // 返回 9
bSTIterator.hasNext(); // 返回 True
bSTIterator.next();    // 返回 15
bSTIterator.hasNext(); // 返回 True
bSTIterator.next();    // 返回 20
bSTIterator.hasNext(); // 返回 False</p></blockquote> <p><strong>提示：</strong></p> <ul><li>树中节点的数目在范围 <code>[1, 105]</code>内</li> <li><code>0 &lt;= Node.val &lt;= 106</code></li> <li>最多调用 <code>105</code>次 <code>hasNext</code>和 <code>next</code>操作</li></ul> <p><strong>进阶：</strong></p> <ul><li>你可以设计一个满足下述条件的解决方案吗？<code>next()</code> 和<code>hasNext()</code>操作均摊时间复杂度为<code>O(1)</code> ，并使用 <code>O(h)</code> 内存。其中<code>h</code> 是树的高度。</li></ul> <h5 id="题解-7"><a href="#题解-7" class="header-anchor">#</a> 题解</h5> <p>根据二叉搜索树的性质，不难发现，原问题等价于对二叉搜索树进行中序遍历。因此，我们可以采取与<a href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/solution/er-cha-shu-de-zhong-xu-bian-li-by-leetcode-solutio/" target="_blank" rel="noopener noreferrer">「94. 二叉树的中序遍历的官方题解」<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>类似的方法来解决这一问题。</p> <p>下面基于<a href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/solution/er-cha-shu-de-zhong-xu-bian-li-by-leetcode-solutio/" target="_blank" rel="noopener noreferrer">「94. 二叉树的中序遍历的官方题解」<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，给出本题的两种解法。读者将不难发现两篇题解的代码存在诸多相似之处。</p> <h6 id="方法一-扁平化"><a href="#方法一-扁平化" class="header-anchor">#</a> 方法一：扁平化</h6> <p>我们可以直接对二叉搜索树做一次完全的递归遍历，获取中序遍历的全部结果并保存在数组中。随后，我们利用得到的数组本身来实现迭代器。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">BSTIterator</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">inorderTraversal</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">BSTIterator</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>idx<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">BSTIterator</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">hasNext</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>idx <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">BSTIterator</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">inorderTraversal</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">inorderTraversal</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">inorderTraversal</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>复杂度分析</strong></p> <ul><li><p>时间复杂度：初始化需要 <code>O(n)</code>的时间，其中 <code>n</code>为树中节点的数量。随后每次调用只需要 <code>O(1)</code>的时间。</p></li> <li><p>空间复杂度：<code>O(n)</code>，因为需要保存中序遍历的全部结果。</p></li></ul> <h6 id="方法二-迭代"><a href="#方法二-迭代" class="header-anchor">#</a> 方法二：迭代</h6> <p>除了递归的方法外，我们还可以利用栈这一数据结构，通过迭代的方式对二叉树做中序遍历。此时，我们无需预先计算出中序遍历的全部结果，只需要实时维护当前栈的情况即可。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">BSTIterator</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cur <span class="token operator">=</span> root<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">BSTIterator</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">next</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cur <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cur <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cur<span class="token punctuation">.</span>val<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cur <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cur<span class="token punctuation">.</span>right<span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">BSTIterator</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">hasNext</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cur <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>stack<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>复杂度分析</strong></p> <ul><li>时间复杂度：显然，初始化和调用 <code>hasNext()</code>都只需要<code>O(1)</code> 的时间。每次调用 <code>next()</code>函数最坏情况下需要 <code>O(n)</code>的时间；但考虑到 <code>n</code>次调用 <code>next()</code> 函数总共会遍历全部的 <code>n</code> 个节点，因此总的时间复杂度为 <code>O(n)</code>，因此单次调用平均下来的均摊复杂度为 <code>O(1)</code>。</li> <li>空间复杂度：<code>O(n)</code>，其中<code>n</code> 是二叉树的节点数量。空间复杂度取决于栈深度，而栈深度在二叉树为一条链的情况下会达到 <code>O(n)</code> 的级别。</li></ul> <h5 id="参考链接-8"><a href="#参考链接-8" class="header-anchor">#</a> 参考链接</h5> <ol><li>https://leetcode-cn.com/problems/binary-search-tree-iterator</li> <li>https://leetcode-cn.com/problems/binary-search-tree-iterator/solution/er-cha-sou-suo-shu-die-dai-qi-by-leetcod-4y0y/</li></ol> <h4 id="_190-颠倒二进制位"><a href="#_190-颠倒二进制位" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/reverse-bits/" target="_blank" rel="noopener noreferrer">190. 颠倒二进制位<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p><strong>难度</strong>：<code>简单</code></p> <p>颠倒给定的 32 位无符号整数的二进制位。</p> <p><strong>提示：</strong></p> <ul><li>请注意，在某些语言（如 Java）中，没有无符号整数类型。在这种情况下，输入和输出都将被指定为有符号整数类型，并且不应影响您的实现，因为无论整数是有符号的还是无符号的，其内部的二进制表示形式都是相同的。</li> <li>在 Java 中，编译器使用二进制补码记法来表示有符号整数。因此，在下面的 示例 2 中，输入表示有符号整数 <code>-3</code>，输出表示有符号整数<code>-1073741825</code>。</li></ul> <p><strong>进阶:</strong>
如果多次调用这个函数，你将如何优化你的算法？</p> <blockquote><p><strong>示例 1：</strong></p> <p>输入：<code>n = 00000010100101000001111010011100</code>
输出：<code>964176192 (00111001011110000010100101000000)</code>
解释：输入的二进制串<code>00000010100101000001111010011100</code> 表示无符号整数 <code>43261596</code>，
因此返回 <code>964176192</code>，其二进制表示形式为<code>00111001011110000010100101000000</code>。</p> <p><strong>示例 2：</strong></p> <p>输入：<code>n = 11111111111111111111111111111101</code>
输出：<code>3221225471 (10111111111111111111111111111111)</code>
解释：输入的二进制串 <code>11111111111111111111111111111101</code> 表示无符号整数<code>4294967293</code>，
因此返回 <code>3221225471</code>其二进制表示形式为 <code>10111111111111111111111111111111</code>。</p></blockquote> <p><strong>提示：</strong></p> <ul><li>输入是一个长度为 32 的二进制字符串</li></ul> <h5 id="题解-8"><a href="#题解-8" class="header-anchor">#</a> 题解</h5> <h6 id="方法一-逐位颠倒"><a href="#方法一-逐位颠倒" class="header-anchor">#</a> 方法一：逐位颠倒</h6> <p><strong>思路</strong></p> <p>将 <code>n</code>视作一个长为 <code>32</code>的二进制串，从低位往高位枚举 <code>n</code>的每一位，将其倒序添加到翻转结果 <code>rev</code> 中。</p> <p>代码实现中，每枚举一位就将<code>n</code>右移一位，这样当前 <code>n</code>的最低位就是我们要枚举的比特位。当<code>n</code>为 <code>0</code> 时即可结束循环。</p> <p>需要注意的是，在某些语言（如<code>Java</code>）中，没有无符号整数类型，因此对<code>n</code> 的右移操作应使用逻辑右移。</p> <p><strong>代码</strong></p> <p>举一个 8 位的二进制进行说明：</p> <table><thead><tr><th style="text-align:center;">i</th> <th style="text-align:center;">n</th> <th style="text-align:center;">res</th></tr></thead> <tbody><tr><td style="text-align:center;">-</td> <td style="text-align:center;">11001001</td> <td style="text-align:center;">-</td></tr> <tr><td style="text-align:center;">0</td> <td style="text-align:center;">1100100</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">1</td> <td style="text-align:center;">110010</td> <td style="text-align:center;">10</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">11001</td> <td style="text-align:center;">100</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">1100</td> <td style="text-align:center;">1001</td></tr> <tr><td style="text-align:center;">4</td> <td style="text-align:center;">110</td> <td style="text-align:center;">10010</td></tr> <tr><td style="text-align:center;">5</td> <td style="text-align:center;">11</td> <td style="text-align:center;">100100</td></tr> <tr><td style="text-align:center;">6</td> <td style="text-align:center;">1</td> <td style="text-align:center;">1001001</td></tr> <tr><td style="text-align:center;">8</td> <td style="text-align:center;">-</td> <td style="text-align:center;">10010011</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">reverseBits</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> rev <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">32</span> <span class="token operator">&amp;&amp;</span> n <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        rev <span class="token operator">|=</span> <span class="token punctuation">(</span>n <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token number">31</span> <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        n <span class="token operator">&gt;&gt;&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> rev <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/*
var reverseBits = function(n){
    let result = 0;
    for(let i=0;i&lt;32;i++){
        result = (result&lt;&lt;1)|(n&amp;1);
        n&gt;&gt;&gt;=1
    }
    return result;
}*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>复杂度分析</strong></p> <ul><li>时间复杂度：<code>O(log*n*)</code>。</li> <li>空间复杂度：<code>O(1)</code>。</li></ul> <h6 id="方法二-位运算分治"><a href="#方法二-位运算分治" class="header-anchor">#</a> 方法二：位运算分治</h6> <p><strong>思路</strong></p> <p>若要翻转一个二进制串，可以将其均分成左右两部分，对每部分递归执行翻转操作，然后将左半部分拼在右半部分的后面，即完成了翻转。</p> <p>由于左右两部分的计算方式是相似的，利用位掩码和位移运算，我们可以自底向上地完成这一分治流程。</p> <p><img src="https://i.loli.net/2021/03/30/sVRoxaPitHjgZeJ.jpg" alt="190.001.jpeg"></p> <p>对于递归的最底层，我们需要交换所有奇偶位：</p> <ol><li>取出所有奇数位和偶数位；</li> <li>将奇数位移到偶数位上，偶数位移到奇数位上。</li></ol> <p>类似地，对于倒数第二层，每两位分一组，按组号取出所有奇数组和偶数组，然后将奇数组移到偶数组上，偶数组移到奇数组上。以此类推。</p> <p>需要注意的是，在某些语言（如<code>Java</code>）中，没有无符号整数类型，因此对 <code>n</code> 的右移操作应使用逻辑右移。</p> <p>这种方式类似于求位1的个数：<a href="https://leetcode-cn.com/problems/number-of-1-bits/solution/wei-1de-ge-shu-by-leetcode-solution-jnwf/" target="_blank" rel="noopener noreferrer">191.位1的个数Leetcode<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">reverseBits</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token constant">M1</span> <span class="token operator">=</span> <span class="token number">0x555555</span><span class="token punctuation">;</span>  <span class="token comment">// 0101010101010101 0101010101010101</span>
    <span class="token keyword">const</span> <span class="token constant">M2</span> <span class="token operator">=</span> <span class="token number">0x333333</span><span class="token punctuation">;</span>  <span class="token comment">// 0011001100110011 0011001100110011</span>
    <span class="token keyword">const</span> <span class="token constant">M4</span> <span class="token operator">=</span> <span class="token number">0x0f0f0f0f</span><span class="token punctuation">;</span>  <span class="token comment">// 0000111100001111 0000111100001111</span>
    <span class="token keyword">const</span> <span class="token constant">M8</span> <span class="token operator">=</span> <span class="token number">0x00ff00ff</span> <span class="token punctuation">;</span> <span class="token comment">// 0000000011111111 0000000011111111 </span>
    
    n <span class="token operator">=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;</span> <span class="token constant">M1</span><span class="token operator">|</span><span class="token punctuation">(</span>n<span class="token operator">&amp;</span><span class="token constant">M1</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">;</span>
    n <span class="token operator">=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">2</span> <span class="token operator">&amp;</span> <span class="token constant">M2</span><span class="token operator">|</span><span class="token punctuation">(</span>n<span class="token operator">&amp;</span><span class="token constant">M2</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">2</span><span class="token punctuation">;</span>
    n <span class="token operator">=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">4</span> <span class="token operator">&amp;</span> <span class="token constant">M4</span><span class="token operator">|</span><span class="token punctuation">(</span>n<span class="token operator">&amp;</span><span class="token constant">M4</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">4</span><span class="token punctuation">;</span>
    n <span class="token operator">=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">8</span> <span class="token operator">&amp;</span> <span class="token constant">M8</span><span class="token operator">|</span><span class="token punctuation">(</span>n<span class="token operator">&amp;</span><span class="token constant">M8</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">8</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> <span class="token punctuation">(</span>n<span class="token operator">&gt;&gt;&gt;</span><span class="token number">16</span><span class="token operator">|</span>n<span class="token operator">&lt;&lt;</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>复杂度分析</strong></p> <ul><li><p>时间复杂度：<code>O(1)</code>。</p></li> <li><p>空间复杂度：<code>O(1)</code>。</p></li></ul> <h5 id="参考链接-9"><a href="#参考链接-9" class="header-anchor">#</a> 参考链接</h5> <p>1.[<a href="https://leetcode-cn.com/problems/reverse-bits/" target="_blank" rel="noopener noreferrer">190. 颠倒二进制位<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>](https://leetcode-cn.com/problems/reverse-bits/)</p> <p>2.https://leetcode-cn.com/problems/reverse-bits/solution/dian-dao-er-jin-zhi-wei-by-leetcode-solu-yhxz/</p> <p>3.https://leetcode-cn.com/problems/reverse-bits/solution/fu-xue-ming-zhu-xun-huan-yu-fen-zhi-jie-hoakf/</p> <h4 id="_74-搜索二维矩阵"><a href="#_74-搜索二维矩阵" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/search-a-2d-matrix/" target="_blank" rel="noopener noreferrer">74. 搜索二维矩阵<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p><strong>难度</strong><code>中等</code></p> <p>在一个m*n的矩阵中实现一种算法，找出一个数值，满足下面两点特性：</p> <ol><li>同一行中的整数从左往右升序；</li> <li>每一行中首位数大于上一行的末尾整数。</li></ol> <p><strong>示例：</strong></p> <p>eg1:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>matrix <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2,5</span>,8,9<span class="token punctuation">]</span>,<span class="token punctuation">[</span><span class="token number">10,12</span>,13,17<span class="token punctuation">]</span>,<span class="token punctuation">[</span><span class="token number">32,35</span>,37,41<span class="token punctuation">]</span><span class="token punctuation">]</span>
target <span class="token operator">=</span> <span class="token number">5</span>
result <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><table><thead><tr><th style="text-align:center;">2</th> <th style="text-align:center;">5</th> <th style="text-align:center;">8</th> <th style="text-align:center;">9</th></tr></thead> <tbody><tr><td style="text-align:center;">10</td> <td style="text-align:center;">12</td> <td style="text-align:center;">13</td> <td style="text-align:center;">17</td></tr> <tr><td style="text-align:center;">25</td> <td style="text-align:center;">26</td> <td style="text-align:center;">28</td> <td style="text-align:center;">30</td></tr> <tr><td style="text-align:center;">32</td> <td style="text-align:center;">35</td> <td style="text-align:center;">37</td> <td style="text-align:center;">41</td></tr></tbody></table> <p>eg2:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>matrix <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">47</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
target <span class="token operator">=</span>  <span class="token number">17</span>
result <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><table><thead><tr><th style="text-align:center;">1</th> <th style="text-align:center;">3</th> <th style="text-align:center;">5</th> <th style="text-align:center;">7</th></tr></thead> <tbody><tr><td style="text-align:center;">10</td> <td style="text-align:center;">11</td> <td style="text-align:center;">16</td> <td style="text-align:center;">20</td></tr> <tr><td style="text-align:center;">23</td> <td style="text-align:center;">30</td> <td style="text-align:center;">34</td> <td style="text-align:center;">36</td></tr> <tr><td style="text-align:center;">40</td> <td style="text-align:center;">45</td> <td style="text-align:center;">47</td> <td style="text-align:center;">50</td></tr></tbody></table> <h5 id="题解-9"><a href="#题解-9" class="header-anchor">#</a> 题解</h5> <h6 id="二分法"><a href="#二分法" class="header-anchor">#</a> 二分法</h6> <p>由题意可知，二维矩阵固定列的[从上到下]或者固定行的[从左到右]都是升序的，通过二分法寻找满足题目的数值：</p> <ol><li>第一次：从0列中寻找，记下合适的行号 m</li> <li>第二次：从第m行中寻找，记下合适的列号n</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">searchMatrix</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">matrix<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> m <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">const</span> n <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    
    <span class="token comment">// 第一次：从第0列开始遍历 top  to bottom , 找到matrix[i][0]&lt;=target的行号</span>
    <span class="token keyword">let</span> top <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> bottom <span class="token operator">=</span> m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>top<span class="token operator">&lt;</span>bottom<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> mid <span class="token operator">=</span> top <span class="token operator">+</span> bottom <span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&gt;&gt;</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 取中位数</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&lt;=</span>target<span class="token punctuation">)</span><span class="token punctuation">{</span>
            top <span class="token operator">=</span> mid<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            bottom <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">let</span> row <span class="token operator">=</span> bottom<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> target<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    
    <span class="token comment">//第二次：在所在行中寻找满足条件的列（从左往右，找到最后一个满足matrix[row][j]&lt;=target的列号</span>
    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> right <span class="token operator">=</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>left<span class="token operator">&lt;</span>right<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> mid <span class="token operator">=</span> left <span class="token operator">+</span> right <span class="token operator">+</span>  <span class="token number">1</span><span class="token operator">&gt;&gt;</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token operator">&lt;=</span>target<span class="token punctuation">)</span><span class="token punctuation">{</span>
            left <span class="token operator">=</span> mid<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            right <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> col <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token keyword">return</span> matrix<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>执行结果：通过 显示详情
执行用时：<span class="token number">92</span> ms<span class="token punctuation">,</span> 在所有 JavaScript 提交中击败了<span class="token number">33.59</span><span class="token operator">%</span>的用户
内存消耗：<span class="token number">38.7</span> <span class="token constant">MB</span><span class="token punctuation">,</span> 在所有 JavaScript 提交中击败了<span class="token number">81.24</span><span class="token operator">%</span>的用户
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h6 id="复杂度分析-6"><a href="#复杂度分析-6" class="header-anchor">#</a> 复杂度分析</h6> <ul><li>时间复杂度O(log<em>m</em>+log<em>n</em>)</li> <li>空间复杂度O(1)</li></ul> <h5 id="参考链接-10"><a href="#参考链接-10" class="header-anchor">#</a> 参考链接</h5> <ol><li>力扣（LeetCode）https://leetcode-cn.com/problems/search-a-2d-matrix</li> <li>【宫水三叶】一题双解：「二分」&amp;「抽象 BST」解法 ... https://leetcode-cn.com/problems/search-a-2d-matrix/solution/gong-shui-san-xie-yi-ti-shuang-jie-er-fe-l0pq/</li> <li>【负雪明烛】六种方法，帮你拓展思路 https://leetcode-cn.com/problems/search-a-2d-matrix/solution/fu-xue-ming-zhu-liu-chong-fang-fa-bang-n-e20z/</li></ol> <h4 id="_90-子集-ii"><a href="#_90-子集-ii" class="header-anchor">#</a> <a href="https://leetcode-cn.com/problems/subsets-ii/" target="_blank" rel="noopener noreferrer">90. 子集 II<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h4> <p><strong>难度</strong><code>中等</code></p> <p>计算一个可能包含整数数组的<code>nums</code>，返回该数组所有可能去重的子集(幂集)</p> <h5 id="题解-10"><a href="#题解-10" class="header-anchor">#</a> 题解</h5> <p>子集(幂集)：</p> <blockquote><p><strong>子集</strong>是一个数学概念：如果集合<em>A</em>的<strong>任意一个元素</strong>都是集合<em>B</em>的元素，那么集合<em>A</em>称为集合<em>B</em>的<strong>子集</strong>。</p> <p>符号语言：若∀<em>a</em>∈<em>A，均</em>有<em>a</em>∈<em>B</em>，则<em>A</em>⊆<em>B。</em></p></blockquote> <p><img src="G:%5CPrivateFile%5CStudy%5CPicture%5CLeetCode%5Cleetcode-90.png" alt="image-20210401211214247"></p> <p>本文主要能够实现去重：<strong>所谓去重，其实就是使用过的元素不能重复选取</strong>[3]，<strong>要去重的是同一树层上的“使用过”，同一树枝上的都是一个组合里的元素，不用去重</strong>。由上图可知（<strong>注意去重需要先对集合排序</strong>）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">subsetsWithDup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    nums <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>a<span class="token operator">-</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">dfs</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span>arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span>index<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&gt;</span>index<span class="token operator">&amp;&amp;</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">===</span>nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 同一根树上面有两个重复元素</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 下一层</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>结果</strong></p> <blockquote><p>执行结果：通过</p> <p>执行用时：92 ms, 在所有 JavaScript 提交中击败了64.37%的用户</p> <p>内存消耗：39.6 MB, 在所有 JavaScript 提交中击败了94.62%的用户</p></blockquote> <h5 id="参考链接-11"><a href="#参考链接-11" class="header-anchor">#</a> 参考链接</h5> <ol><li>力扣（LeetCode）https://leetcode-cn.com/problems/subsets-ii</li> <li>子集 https://baike.baidu.com/item/%E5%AD%90%E9%9B%86/5017034?fr=aladdin</li> <li>「代码随想录」90. 子集 II:【彻底理解子集问题如何去重】详解https://leetcode-cn.com/problems/subsets-ii/solution/90-zi-ji-iiche-di-li-jie-zi-ji-wen-ti-ru-djmf/</li> <li>回溯法：模板、套路、简化写法 https://leetcode-cn.com/problems/subsets-ii/solution/hui-su-fa-mo-ban-tao-lu-jian-hua-xie-fa-y4evs/</li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/1/2021, 11:29:36 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/CS-LearnRepository/assets/js/app.ae6f3f76.js" defer></script><script src="/CS-LearnRepository/assets/js/2.1ba326f9.js" defer></script><script src="/CS-LearnRepository/assets/js/94.f913f980.js" defer></script>
  </body>
</html>
